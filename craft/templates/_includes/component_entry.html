{#
 # This template expects an "entry" variable to be passed in
 #
 #}

<div class="top-level-content">

{% if 'beta' in entry.version %}
  <div class="banner warn">This version has not been approved yet. <a href="./..">Go to the latest approved version</a>.</div>
{% endif %}

<div class="blocks">
  <div class="block article_header">
    <h1 class="pe-page-title">{{ entry.parent.title }}</h1>
    <span class="pe-label pe-label--large {% if 'beta' in entry.version %}beta{% endif %}">v{{ entry.version }}</span>

    <div class="buttons">
      {% include '_includes/uikit-download' %}

      {% if entry['implementation'] is defined %}
        <a href="{{ entry.implementation }}" class="pe-btn__primary--btn_large code">
          <svg style="vertical-align: baseline;"
               aria-hidden="true"
               focusable="false"
               viewBox="0 0 22 18"
               xmlns="http://www.w3.org/2000/svg"
               xmlns:xlink="http://www.w3.org/1999/xlink"
               class="pe-icon--code-18">
           <path d="M6.70526173,14.7060005 C7.09874655,14.3160005 7.09674408,13.6830005 6.70726419,13.2920005 L2.41597679,8.99900048 L6.70726419,4.70600048 C7.09774531,4.31500048 7.09774531,3.68300048 6.70626296,3.29200048 C6.31377937,2.90200048 5.68099971,2.90300048 5.28951735,3.29300048 L0.292360225,8.29200048 C0.0971196636,8.48800048 -3.12638804e-13,8.74300048 -3.12638804e-13,8.99900048 C-3.12638804e-13,9.25500048 0.0971196636,9.51000048 0.292360225,9.70600048 L5.28951735,14.7050005 C5.68099971,15.0960005 6.31377937,15.0960005 6.70526173,14.7060005 Z" id="icon"></path>
           <path d="M15.2947383,14.7060005 C14.9012535,14.3160005 14.9032559,13.6830005 15.2927358,13.2920005 L19.5840232,8.99900048 L15.2927358,4.70600048 C14.9022547,4.31500048 14.9022547,3.68300048 15.293737,3.29200048 C15.6862206,2.90200048 16.3190003,2.90300048 16.7104826,3.29300048 L21.7076398,8.29200048 C21.9028803,8.48800048 22,8.74300048 22,8.99900048 C22,9.25500048 21.9028803,9.51000048 21.7076398,9.70600048 L16.7104826,14.7050005 C16.3190003,15.0960005 15.6862206,15.0960005 15.2947383,14.7060005 Z" id="icon"></path>
           <path d="M13.3718,3.073 C12.8568,2.865 12.2768,3.117 12.0718,3.631 L8.0718,13.629 C7.8668,14.141 8.1158,14.723 8.6288,14.928 C8.7508,14.977 8.8758,15 8.9998,15 C9.3968,15 9.7718,14.762 9.9288,14.371 L13.9288,4.373 C14.1338,3.86 13.8848,3.278 13.3718,3.073" id="icon"></path>
          </svg>
          Code
        </a>
      {% else %}
        <button disabled class="pe-btn--btn_large">Code pending</button>
      {% endif %}
    </div>
  </div>

  <div class="block overview">
    <div class="left">
      <p class="pe-copy pe-copy--large tagline">{{ entry.tagline }}</p>
      <div class="buttons">
        {% include '_includes/uikit-download.html' %}

        {% if entry['implementation'] is defined %}
          <a href="{{ entry.implementation }}" class="pe-btn__primary--btn_large code">
            <svg style="vertical-align: baseline;"
                 aria-hidden="true"
                 focusable="false"
                 viewBox="0 0 22 18"
                 xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink"
                 class="pe-icon--code-18">
             <path d="M6.70526173,14.7060005 C7.09874655,14.3160005 7.09674408,13.6830005 6.70726419,13.2920005 L2.41597679,8.99900048 L6.70726419,4.70600048 C7.09774531,4.31500048 7.09774531,3.68300048 6.70626296,3.29200048 C6.31377937,2.90200048 5.68099971,2.90300048 5.28951735,3.29300048 L0.292360225,8.29200048 C0.0971196636,8.48800048 -3.12638804e-13,8.74300048 -3.12638804e-13,8.99900048 C-3.12638804e-13,9.25500048 0.0971196636,9.51000048 0.292360225,9.70600048 L5.28951735,14.7050005 C5.68099971,15.0960005 6.31377937,15.0960005 6.70526173,14.7060005 Z" id="icon"></path>
             <path d="M15.2947383,14.7060005 C14.9012535,14.3160005 14.9032559,13.6830005 15.2927358,13.2920005 L19.5840232,8.99900048 L15.2927358,4.70600048 C14.9022547,4.31500048 14.9022547,3.68300048 15.293737,3.29200048 C15.6862206,2.90200048 16.3190003,2.90300048 16.7104826,3.29300048 L21.7076398,8.29200048 C21.9028803,8.48800048 22,8.74300048 22,8.99900048 C22,9.25500048 21.9028803,9.51000048 21.7076398,9.70600048 L16.7104826,14.7050005 C16.3190003,15.0960005 15.6862206,15.0960005 15.2947383,14.7060005 Z" id="icon"></path>
             <path d="M13.3718,3.073 C12.8568,2.865 12.2768,3.117 12.0718,3.631 L8.0718,13.629 C7.8668,14.141 8.1158,14.723 8.6288,14.928 C8.7508,14.977 8.8758,15 8.9998,15 C9.3968,15 9.7718,14.762 9.9288,14.371 L13.9288,4.373 C14.1338,3.86 13.8848,3.278 13.3718,3.073" id="icon"></path>
            </svg>
            Code
          </a>
        {% else %}
          <button disabled class="pe-btn--btn_large">Code pending</button>
        {% endif %}
      </div>

      {% if entry['usageGuidelines'] is defined and entry.usageGuidelines %}
        <div class="usage_guidelines">
          <p><span class="pe-label pe-label--bold">Usage Guidelines</span></p>
          {{ entry.usageGuidelines }}
        </div>
      {% endif %}

      <div class="toc">
        <ul>
          {% for block in entry.blocks %}
            {% if block.type == "sectionName" %}
              <li><a href="#{{ block.nameOfSection | kebab }}">{{ block.nameOfSection }}</a></li>
            {% endif %}
          {% endfor %}
          <li><a href="#changelog">Changelog</a></li>
        </ul>
      </div>
    </div>

    <div class="right">
      {% if entry['features'] is defined and entry.features | length %}
        <div class="features">
          <p><span class="pe-label pe-label--bold">Features</span></p>
          <ul class="pe-list pe-styled-lists--unordered">
            {% for row in entry.features %}
              <li>{{ row.feature }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      <div class="dependencies">
        <p><span class="pe-label pe-label--bold">Dependencies</span></p>
        {% for dependency in entry.dependencies %}
          <p>
            <a href="{{ siteUrl }}components/{{ dependency.parent.title | kebab }}/v{{ dependency.version }}">
              {{ dependency.parent.title }} v{{ dependency.version }}
            </a>
          </p>
        {% endfor %}
        {% if entry.dependencies | length == 0 %}
          <p>None</p>
        {% endif %}
      </div>

      <div class="other">
        <p><span class="pe-label pe-label--bold">Documents</span></p>
        {% if entry.accessibilityChecklist %}
          <p><a href="{{ entry.accessibilityChecklist }}" target="_blank">UX Accessibility Checklist</a></p>
        {% endif %}

        {% if entry['quality_checklist'] is defined and entry.quality_checklist %}
          <p><a href="{{ entry.quality_checklist }}"></a></p>
        {% endif %}

        {% if entry.sketchFile.first() %}
          <p><a href="{{ entry.sketchFile.first().url }}">Documentation Assets (Sketch)</a></p>
        {% endif %}
      </div>

    </div>
  </div>

  {% for block in entry.blocks %}
    <div class="block">
      {% include '_includes/blocks/' ~ block.type %}
    </div>
  {% endfor %}

  <div class="block changelog">
    <h2 class="pe-title pe-bold" id="changelog">Changelog</h2>
    {% for change in entry.changelog %}
      {% if change.version != entry.version %}
        <h3 class="pe-title"><a href="{{ siteUrl }}components/{{ entry.parent.title | kebab }}/v{{ change.version }}">{{ change.version }}</a></h3>
      {% else %}
        <h3 class="pe-title">{{ change.version }}</h3>
      {% endif %}
      {% if change.changeAuthor.first() %}
        <p class="pe-label pe-label--small">{{ change.changeAuthor.first().fullName }}</p>
      {% endif %}
      {{ change.changes }}
    {% endfor %}
  </div>
</div>
