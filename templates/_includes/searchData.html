<script type="text/javascript">
  var componentData = [
    {% for component in craft.entries.section('components').type('component') %}

    {% set latestVersion = component.getChildren().find() | latestApproved %}
    {% if latestVersion %}
      {
        name: '{{ latestVersion.parent.title }}',
        version: '{{ latestVersion.version }}',
        url: '{{ latestVersion.url }}'
      },
    {% endif %}
    {% endfor %}
  ]
</script>
